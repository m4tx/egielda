{% extends "common/base.html" %}
{% load i18n %}

{% block title %}{% trans "Manage books" %}{% endblock %}

{% block content %}
{% include "common/alerts.html" %}
<h1>{% trans "Books" %}</h1>
{% if book_list %}
<form action="{% url 'books.views.bulk_actions' 'remove' %}" method="post">
    <table class="table table-hover table-responsive">
        <thead>
            <tr>
                <th><input type="checkbox" id="select-all"></th>
                <th>{% trans "Publisher" %}</th>
                <th>{% trans "Title" %}</th>
                <th>{% trans "Price" %}</th>
                <th>{% trans "Actions" %}</th>
            </tr>
        </thead>

        {% for book in book_list %}
        <tr>
            <td><input type="checkbox" name="select-{{ book.id }}"></td>
            <td>{{ book.publisher }}</td>
            <td>{{ book.title }}</td>
            <td>{{ book.price_string }}</td>
            <td>
                <div class="btn-toolbar" role="toolbar">
                    <a class="btn btn-xs btn-link" href="{% url 'books.views.edit_book' book.id %}" role="button"><span class="glyphicon glyphicon-edit"></span> {% trans "Edit" %}</a>
                    <a class="btn btn-xs btn-link" href="{% url 'books.views.remove_book' book.id %}" role="button"><span class="glyphicon glyphicon-remove"></span> {% trans "Remove" %}</a>
                </div>
            </td>
        </tr>
        {% endfor %}

        <tr class="info">
            <td></td>
            <td colspan="3" class="text-right text-muted">{% trans "Bulk actions:" %}</td>
            <td>
                <div class="btn-toolbar" role="toolbar">
                    <button class="btn btn-xs btn-link" type="submit"><span class="glyphicon glyphicon-remove"></span> {% trans "Remove" %}</input>
                </div>
            </td>
        </tr>
    </table>
    {% csrf_token %}
</form>

{% block footer %}
<script type="text/javascript">
    window.addEventListener("load", function() {
        $("input[name^='select-']").on('change', function() {
            $(this).closest($('tr')).toggleClass('active', this.checked);
        });

        $("input#select-all").on('change', function() {
            $("input[name^='select-']").prop('checked', this.checked);
            $("input[name^='select-']").closest($('tr')).toggleClass('active', this.checked);
        });
    });
</script>
{% endblock %}
{% else %}
<div class="alert alert-info">{% trans "There's nothing to display." %}</div>
{% endif %}
<a class="btn btn-primary" href="{% url 'books.views.add_book' %}" role="button"><span class="glyphicon glyphicon-plus"></span> {% trans "Add book" %}</a>
{% endblock %}