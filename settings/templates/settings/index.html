{% extends "common/base.html" %}
{% load i18n %}
{% load manage_header %}

{% block head %}
    {% load staticfiles %}
    <link rel="stylesheet" href="{% static "css/jquery.datetimepicker.css" %}">
{% endblock %}

{% block title %}{% trans "Settings" %}{% endblock %}

{% block content %}
    <h1>{% trans "Settings" %}</h1>
    {% manage_header "settings" %}

    <form class="ui form" action="{{ request.path }}" method="post">
        {% include "common/default_form.html" %}
        {% csrf_token %}
        <button type="submit" class="ui primary icon labeled button right floated">
            <i class="icon checkmark"></i>{% trans "Save" %}
        </button>
    </form>
{% endblock %}

{% block footer %}
    <script src="{% static "js/jquery.datetimepicker.js" %}"></script>
    <script type="text/javascript" src="{% url "django.views.i18n.javascript_catalog" %}"></script>
    <script type="text/javascript">
        window.addEventListener("load", function () {
            var isDatetimeSupported = false,
                    input = document.createElement("input");
            input.setAttribute("type", "datetime-local");

            if (input.type === "datetime-local") {
                isDatetimeSupported = true;
            }

            if (!isDatetimeSupported) {
                $('input[type="datetime-local"]').each(function () {
                    $(this).datetimepicker({
                        format: 'Y-m-d H:i',
                        lang: '{{ LANGUAGE_CODE }}'
                    });

                    $(this).attr("placeholder", gettext("YYYY-MM-DD HH:MM"));
                    if ($(this).is("[value]")) {
                        $(this).attr("value", $(this).attr("value").replace("T", " "));
                    }
                });
            }
        });
    </script>
{% endblock %}
