{% extends "common/base.html" %}
{% load i18n %}
{% load manage_header %}

{% block head %}
    {% load staticfiles %}
    <link rel="stylesheet" href="{% static "css/bootstrap-datetimepicker.min.css" %}">
{% endblock %}

{% block title %}{% trans "Settings" %}{% endblock %}

{% block content %}
    <h1>{% trans "Settings" %}</h1>
    {% manage_header "settings" %}

    <form class="ui form" action="{{ request.path }}" method="post">
        {% include "common/default_form.html" %}
        {% csrf_token %}
        <button type="submit" class="ui primary icon labeled button right floated">
            <i class="icon checkmark"></i>{% trans "Save" %}
        </button>
    </form>
{% endblock %}

{% block footer %}
    <script src="{% static "js/moment.js" %}"></script>
    <script src="{% static "js/bootstrap-datetimepicker.min.js" %}"></script>
    <script type="text/javascript">
        window.addEventListener("load", function () {
            var is_datetime_supported = false;
            var input = document.createElement("input");
            input.setAttribute("type", "datetime-local");

            if (input.type === "datetime-local") {
                is_datetime_supported = true;
            }

            $('[data-datetimepicker]').each(function () {
                if (is_datetime_supported) {
                    return;
                }

                $(this).attr("placeholder", "RRRR-MM-DD GG:MM");
                if ($(this).is("[value]")) {
                    $(this).attr("value", $(this).attr("value").replace("T", " "));
                }

                $("<span class=\"input-group-addon\"><span class=\"glyphicon glyphicon-calendar\"></span></span>").insertAfter($(this));
                $(this).next().addBack().wrapAll("<div class=\"input-group\" data-date-format=\"YYYY-MM-DD HH:mm\"></div>");
                $(this).parent().datetimepicker({language: 'pl'});
            });
        });
    </script>
{% endblock %}
